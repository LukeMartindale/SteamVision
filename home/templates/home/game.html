{% extends "home/base.html" %}
{% load static %}

{% block content %}

    <!-- Load sentiment data passed through by view -->
    <!-- I have to do this hear as otherwise there is no way to access data in javascript file -->
    <script defer>
        //Draws graphs on page load
        $(document).ready(function() {
            sentiment_graph()
        });

        //Redraws graph after dealy when page is resized
        let resizeTimer;
        $(window).resize(function () { 
            clearTimeout(resizeTimer)
            resizeTimer = setTimeout(function() {
                sentiment_graph()
                console.log("RESIZE")
            }, 100)
        });
    </script>

    <!-- My CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'home/css/graphs.css' %}">

    <div class="row">
        <div class="col-sm-9">
            <div class="box main-colour">
                <div class="box-body box-text text">
                    <img src="{% static 'home/images/CSGO-Banner.jpg' %}" style="height: 500px; width: 100%;" class="d-inline-block align-top rounded" alt="">
                    <h1>Counter Strike</h1>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="box main-colour">
                <div class="box-head">
                  <h3 class="box-title text">Game Information</h3>
                </div>
                <div class="box-body box-text text">
                    <div id="description">
                        <h6>Description</h4>
                        <p style="text-align: left">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">Release Date:</div>
                        <div class="col-sm-8" style="text-align:left; overflow: hidden;">29th November 2000</div>
                    </div>

                    <div class="row">
                        <div class="col-sm-4">Developer:</div>
                        <div class="col-sm-8" style="text-align:left; overflow: hidden;">Valve</div>
                    </div>

                    <div class="row">
                        <div class="col-sm-4">Publisher:</div>
                        <div class="col-sm-8" style="text-align:left; overflow: hidden;">Valve</div>
                    </div>
                </div>
              </div>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-6">
            <div class="box main-colour">
                <div class="box-head">
                    <h3 class="box-title text">Reviews sentiment</h3>
                </div>
                <div class="box-body box-text text" id="sentiment-box">
                    <svg id="sentiment-graph" style="width: 100%;">
                    </svg>
                </div>
            </div>
        </div>
        <div class="col-sm-6">
            <div class="box main-colour">
                <div class="box-head">
                    <h3 class="box-title text">Reviews sentiment</h3>
                </div>
                <div class="box-body box-text text" id="sentiment-box">
                    {% for sent in sentiment %}
                        <h1>{{ sent }}</h1>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <script src="{% static 'home/javascript/reviews_sentiment_bars.js' %}" defer></script>

{% endblock %}